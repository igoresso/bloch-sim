(this["webpackJsonpbloch-sim"]=this["webpackJsonpbloch-sim"]||[]).push([[0],{98:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),i=a.n(r),s=a(12),o=a.n(s),l=a(73),c=a(13),p=a(16),u=a(141),d=a(74),b=a(146),m=a(147),j=a(35),h=a(11),O=a(5),g=a(149),x=a(63),_=a(150),f=a(134),v=a(101),y=a(130),M=function(e){var t=e.className;return Object(n.jsx)(y.a,{align:"center",className:t,children:"Footer"})},w=a(153),T=Object(g.a)((function(e){return{drawer:Object(h.a)({width:280,padding:e.spacing(3)},e.breakpoints.up("md"),{marginTop:64,height:"calc(100% - 64px)"})}})),B=function(e){var t=e.isOpen,a=e.handleSidebarClose,r=e.variant,i=e.children,s=T();return Object(n.jsx)(w.a,{anchor:"left",classes:{paper:s.drawer},onClose:a,open:t,variant:r,children:i})},N="UPDATE",k="SIMULATE",P="ESTIMATE_PROFILE",z="CLEAR",S="RESET",C="TOGGLE_THEME",E=a(135),I=a(136),G=a(152),D=a(138),A=a(151),q=a(139),L=a(140),R=a(142),U=Object(g.a)((function(e){return{root:{boxShadow:"none"},logo:{marginRight:"auto"},button:{marginLeft:e.spacing(1)}}})),W=function(e){var t=e.handleSidebarOpen,a=e.handleModalOpen,r=U(),i=Object(p.b)();return Object(n.jsx)(E.a,{className:r.root,children:Object(n.jsxs)(I.a,{children:[Object(n.jsx)(y.a,{variant:"h6",className:r.logo,noWrap:!0,children:"Bloch Equation Simulator"}),Object(n.jsx)(G.a,{title:"Toggle light/dark theme",children:Object(n.jsx)(D.a,{edge:"end",color:"inherit",className:r.button,"aria-label":"Toggle light/dark theme",onClick:function(){i({type:C})},children:Object(n.jsx)(q.a,{})})}),Object(n.jsx)(G.a,{title:"User Manual",children:Object(n.jsx)(D.a,{edge:"end",color:"inherit",className:r.button,"aria-label":"User Manual",onClick:a,children:Object(n.jsx)(L.a,{})})}),Object(n.jsx)(A.a,{mdUp:!0,children:Object(n.jsx)(D.a,{edge:"end",color:"inherit",className:r.button,"aria-label":"Open settings",onClick:t,children:Object(n.jsx)(R.a,{})})})]})})},F=a(100),X=a(143),H=Object(g.a)((function(e){return{root:{position:"relative",padding:e.spacing(4)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.primary}}})),V=function(e){var t=e.children,a=e.handleDialogClose,r=H();return Object(n.jsxs)(F.a,{className:r.root,children:[Object(n.jsx)(D.a,{"aria-label":"closeButton",className:r.closeButton,onClick:a,children:Object(n.jsx)(X.a,{})}),t]})},J=Object(g.a)((function(e){var t;return{root:Object(h.a)({height:"100vh",paddingTop:56},e.breakpoints.up("sm"),{paddingTop:64}),contentShift:{paddingLeft:280},content:{height:"100%",display:"flex",flexDirection:"column",padding:e.spacing(2),paddingBottom:0},shiftContent:{paddingLeft:280},modal:(t={display:"flex",justifyContent:"center",alignItems:"flex-start",maxWidth:"1000px",margin:"10vh auto"},Object(h.a)(t,e.breakpoints.up("xs"),{padding:"0 2vh"}),Object(h.a)(t,e.breakpoints.up("sm"),{padding:"0 5vh"}),Object(h.a)(t,e.breakpoints.up("md"),{padding:"0 5vh"}),Object(h.a)(t,e.breakpoints.up("lg"),{padding:"0"}),t),footer:{marginTop:"auto",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}}})),Q=function(e){var t,a=e.sidebarContent,i=e.mainContent,s=e.helpContent,o=J(),l=Object(x.a)(),c=Object(u.a)(l.breakpoints.up("md"),{defaultMatches:!0}),p=Object(r.useState)(!1),d=Object(j.a)(p,2),b=d[0],m=d[1],g=Object(r.useState)(!1),y=Object(j.a)(g,2),w=y[0],T=y[1],N=function(){T(!1)},k=!!c||b;return Object(n.jsxs)("div",{className:Object(O.a)((t={},Object(h.a)(t,o.root,!0),Object(h.a)(t,o.shiftContent,c),t)),children:[Object(n.jsx)(W,{handleSidebarOpen:function(){m(!0)},handleModalOpen:function(){T(!0)}}),Object(n.jsx)(B,{isOpen:k,handleSidebarClose:function(){m(!1)},variant:c?"persistent":"temporary",children:a}),Object(n.jsxs)("main",{className:o.content,children:[i,Object(n.jsx)(M,{className:o.footer}),Object(n.jsx)(_.a,{"aria-labelledby":"modal-title","aria-describedby":"modal-description",className:o.modal,open:w,onClose:N,closeAfterTransition:!0,BackdropComponent:f.a,BackdropProps:{timeout:500},children:Object(n.jsx)(v.a,{in:w,children:Object(n.jsx)(V,{handleDialogClose:N,children:s})})})]})]})},Y=a(6),Z=function(e){return{type:N,payload:e}},$=a(144),K=a(148),ee=a(145),te=Object(g.a)((function(e){return{root:{marginBottom:e.spacing(2)}}})),ae=function(){var e=Object(p.c)((function(e){return e.simulation.params})),t=Object(r.useState)(e),a=Object(j.a)(t,2),i=a[0],s=a[1],o=Object(r.useState)(!1),l=Object(j.a)(o,2),c=l[0],u=l[1],d=Object(p.b)(),b=te(),m=function(t){Number(t.target.value)!==i[t.target.name]&&(s(Object(Y.a)(Object(Y.a)({},e),Object(h.a)({},t.target.name,Number(t.target.value)))),u(!0))},O=function(t){Number(t.target.value)!==e[t.target.name]&&(d(Z(Object(h.a)({},t.target.name,Number(t.target.value)))),d({type:z}),u(!1))};return Object(n.jsxs)("form",{autoComplete:"off",children:[Object(n.jsx)(y.a,{variant:"h6",component:"h2",align:"center",children:"General"}),Object(n.jsxs)($.a,{container:!0,spacing:1,className:b.root,children:[Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"B\u2080 (T)",id:"B0",name:"B0",type:"number",inputProps:{step:"any",min:0},value:c?i.B0:e.B0,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"\u03b3 (MHz/T)",id:"gamma",name:"gamma",type:"number",inputProps:{step:"any",min:0},value:c?i.gamma:e.gamma,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"T\u2081 (ms)",id:"T1",name:"T1",type:"number",inputProps:{step:"any",min:0},value:c?i.T1:e.T1,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"T\u2082 (ms)",id:"T2",name:"T2",type:"number",inputProps:{step:"any",min:0},value:c?i.T2:e.T2,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})})]}),Object(n.jsx)(y.a,{variant:"h6",component:"h2",align:"center",children:"Pulse"}),Object(n.jsxs)($.a,{container:!0,spacing:1,m:2,className:b.root,children:[Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"T (ms)",id:"T_pulse",name:"T_pulse",type:"number",inputProps:{step:"any",min:0},value:c?i.T_pulse:e.T_pulse,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"N",id:"N_pulse",name:"N_pulse",type:"number",inputProps:{step:"any",min:0},value:c?i.N_pulse:e.N_pulse,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"dt (ms)",id:"dt_pulse",name:"dt_pulse",type:"number",inputProps:{step:"any",min:0},value:c?i.dt_pulse:e.dt_pulse,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:Object(n.jsxs)(n.Fragment,{children:["B",Object(n.jsx)("sub",{children:"1, max"})," (mT)"]}),id:"amp_pulse",name:"amp_pulse",type:"number",inputProps:{step:"any"},value:c?i.amp_pulse:e.amp_pulse,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"Shape",id:"shape",name:"shape",select:!0,SelectProps:{native:!0},value:e.shape,onChange:O,margin:"dense",variant:"outlined",disabled:e.isBusy,children:e.shape_options.map((function(e){return Object(n.jsx)("option",{value:e.value,children:e.label},e.value)}))})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"Lobes",id:"lobes",name:"lobes",type:"number",inputProps:{step:"any",min:0},value:c?i.lobes:e.lobes,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:2!==e.shape||e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"\u03c3 (ms)",id:"sd",name:"sd",type:"number",inputProps:{step:"any"},value:c?i.sd:e.sd,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:4!==e.shape||e.isBusy})})]}),Object(n.jsx)(y.a,{variant:"h6",component:"h2",align:"center",children:"Gradient"}),Object(n.jsx)($.a,{container:!0,spacing:1,m:2,className:b.root,children:Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:Object(n.jsxs)(n.Fragment,{children:["G",Object(n.jsx)("sub",{children:"z"})," (mT/m)"]}),id:"amp_Gz",name:"amp_Gz",type:"number",inputProps:{step:"any",min:0},value:c?i.amp_Gz:e.amp_Gz,onChange:m,onBlur:O,margin:"dense",variant:"outlined"})})}),Object(n.jsx)(y.a,{variant:"h6",component:"h2",align:"center",children:"Slice Profile"}),Object(n.jsxs)($.a,{container:!0,spacing:1,m:2,className:b.root,children:[Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"l (mm)",id:"l_profile",name:"l_profile",type:"number",inputProps:{step:"any",min:0},value:c?i.l_profile:e.l_profile,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"N",id:"N_profile",name:"N_profile",type:"number",inputProps:{step:"any",min:0},value:c?i.N_profile:e.N_profile,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})}),Object(n.jsx)($.a,{item:!0,xs:6,children:Object(n.jsx)(K.a,{label:"dl (mm)",id:"dl_profile",name:"dl_profile",type:"number",inputProps:{step:"any",min:0},value:c?i.dl_profile:e.dl_profile,onChange:m,onBlur:O,margin:"dense",variant:"outlined",disabled:e.isBusy})})]}),Object(n.jsx)(ee.a,{color:"primary",variant:"contained",size:"large",type:"submit",onClick:function(e){e.preventDefault(),d(Z({isBusy:!0})),d({type:k}),d({type:P})},disabled:e.isBusy,fullWidth:!0,disableElevation:!0,children:e.isBusy?"Working":"Simulate"})]})},ne=a(32),re=a.n(ne),ie=Object(g.a)((function(e){return{plot:{width:"100%"}}})),se=function(){var e=Object(p.c)((function(e){return e.simulation.output})),t=ie(),a=Object(x.a)(),r="dark"===a.palette.type?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)",i="dark"===a.palette.type?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.4)",s="dark"===a.palette.type?"rgba(255, 255, 255, 1)":"rgba(0, 0, 0, 0.8)",o=[{name:"B1_x",type:"scattergl",mode:"lines",line:{width:3,color:"#ff8f7b"},x:e.t_vec,y:e.B1_x_vec},{name:"B1_y",type:"scattergl",mode:"lines",line:{width:3,color:"#fbb84d"},x:e.t_vec,y:e.B1_y_vec},{name:"Gz",type:"scattergl",yaxis:"y2",mode:"lines",line:{width:3,color:"#02ffb3"},x:e.t_vec,y:e.Gz_vec}],l={height:450,paper_bgcolor:"transparent",plot_bgcolor:"transparent",title:{text:"Excitation Pattern"},xaxis:{title:{text:"Time (ms)"},type:"linear",range:[0,e.T_pulse],gridcolor:r,zerolinecolor:i,linecolor:r,showspikes:!1},yaxis:{title:{text:"Amplitude (mT)",standoff:5},type:"linear",gridcolor:r,zerolinecolor:i,linecolor:r,showspikes:!1,showline:!0},yaxis2:{title:"Gradient (mT/m)",overlaying:"y",side:"right",gridcolor:r,zerolinecolor:i,linecolor:r,showspikes:!1},font:{color:s}};return Object(n.jsx)(re.a,{data:o,layout:l,config:{responsive:!0},className:t.plot})},oe=Object(g.a)((function(e){return{plot:{width:"100%"}}})),le=function(){var e=Object(p.c)((function(e){return e.simulation.output})),t=Object(p.c)((function(e){return e.simulation.params.T_pulse})),a=oe(),r=Object(x.a)(),i="dark"===r.palette.type?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)",s="dark"===r.palette.type?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.4)",o="dark"===r.palette.type?"rgba(255, 255, 255, 1)":"rgba(0, 0, 0, 0.8)",l=[{name:"M_xy",type:"scattergl",mode:"lines",visible:"legendonly",line:{width:3,color:"#ff7eb8"},x:e.t_vec,y:e.Mxy_vec},{name:"M_x",type:"scattergl",mode:"lines",line:{width:3,color:"#ff8f7b"},x:e.t_vec,y:e.Mx_vec},{name:"M_y",type:"scattergl",mode:"lines",line:{width:3,color:"#fbb84d"},x:e.t_vec,y:e.My_vec},{name:"M_z",type:"scatter",mode:"lines",line:{width:3,color:"#b7e15d"},x:e.t_vec,y:e.Mz_vec}],c={height:450,paper_bgcolor:"transparent",plot_bgcolor:"transparent",title:{text:"Magnetisation"},xaxis:{title:{text:"Time (ms)"},type:"linear",range:[0,t],gridcolor:i,zerolinecolor:s,linecolor:i,showspikes:!1},yaxis:{title:{text:"Normalized Magnetisation",standoff:5},type:"linear",gridcolor:i,zerolinecolor:s,linecolor:i,showspikes:!1},font:{color:o}};return Object(n.jsx)(re.a,{data:l,layout:c,config:{responsive:!0},className:a.plot})},ce=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=2*Math.floor(e/2),a=[],n=[],r=[],i=0;i<t/2;i++)for(var s=2*Math.PI/t*(i+1),o=0;o<=2*t;o++){var l=Math.PI*o/t;if(a.push(Math.sin(l)*Math.cos(s)),n.push(Math.sin(l)*Math.sin(s)),r.push(Math.cos(l)),i===t/2-1&&o===t)break}for(var c=t-1;c>0;c--)for(var p=-Math.PI*c/t,u=0;u<=t;u++){var d=2*Math.PI*u/t+Math.PI;a.push(Math.sin(p)*Math.cos(d)),n.push(Math.sin(p)*Math.sin(d)),r.push(Math.cos(p))}return{x:a,y:n,z:r}},pe=Object(g.a)((function(e){return{plot:{width:"100%"}}})),ue=function(){var e=Object(p.c)((function(e){return e.simulation.output})),t=pe(),a=Object(x.a)(),r="dark"===a.palette.type?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",i="dark"===a.palette.type?"rgba(255, 255, 255, 0.9)":"rgba(0, 0, 0, 0.4)",s="dark"===a.palette.type?"rgba(255, 255, 255, 1)":"rgba(0, 0, 0, 0.8)",o=ce(),l=[Object(Y.a)({type:"scatter3d",mode:"lines",opacity:.2,line:{width:2,color:o.z,colorscale:"Portland"},hoverinfo:"none",showlegend:!1},o),{type:"scatter3d",mode:"lines",line:{width:5,color:"#ff0000"},hoverinfo:"none",showlegend:!1,x:e.Mx_vec,y:e.My_vec,z:e.Mz_vec}],c={margin:{l:0,r:0,b:0,t:0},height:450,paper_bgcolor:"transparent",scene:{bgcolor:"transparent",xaxis:{title:"X",range:[-1,1],type:"linear",gridcolor:r,zerolinecolor:i,linecolor:r,showspikes:!1},yaxis:{title:"Y",range:[-1,1],type:"linear",gridcolor:r,zerolinecolor:i,linecolor:r,showspikes:!1},zaxis:{title:"Z",range:[-1,1],type:"linear",gridcolor:r,zerolinecolor:r,linecolor:r,showspikes:!1},camera:{eye:{x:1.3,y:1.3,z:1.3}}},font:{color:s}};return Object(n.jsx)(re.a,{data:l,layout:c,config:{responsive:!0,modeBarButtonsToRemove:["hoverClosest3d"]},className:t.plot})},de=Object(g.a)((function(e){return{plot:{width:"100%"}}})),be=function(){var e=Object(p.c)((function(e){return e.simulation.output})),t=Object(p.c)((function(e){return e.simulation.params.l_profile})),a=de(),r=Object(x.a)(),i="dark"===r.palette.type?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)",s="dark"===r.palette.type?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.4)",o="dark"===r.palette.type?"rgba(255, 255, 255, 1)":"rgba(0, 0, 0, 0.8)",l=[{name:"M_xy",type:"scattergl",mode:"lines",line:{width:3,color:"#ff7eb8"},x:e.z_vec,y:e.SPxy_vec},{name:"M_x",type:"scattergl",mode:"lines",visible:"legendonly",line:{width:3,color:"#ff8f7b"},x:e.z_vec,y:e.SPx_vec},{name:"M_y",type:"scattergl",mode:"lines",visible:"legendonly",line:{width:3,color:"#fbb84d"},x:e.z_vec,y:e.SPy_vec},{name:"M_z",type:"scattergl",mode:"lines",visible:"legendonly",line:{width:3,color:"#b7e15d"},x:e.z_vec,y:e.SPz_vec}],c={height:450,paper_bgcolor:"transparent",plot_bgcolor:"transparent",title:{text:"Slice Profile"},xaxis:{title:{text:"z (mm)"},type:"linear",range:[-t/2,t/2],gridcolor:i,zerolinecolor:s,linecolor:i,showspikes:!1},yaxis:{title:{text:"Normalised Magnetisation",standoff:5},type:"linear",gridcolor:i,zerolinecolor:s,linecolor:i,showspikes:!1,showline:!0},font:{color:o}};return Object(n.jsx)(re.a,{data:l,layout:c,config:{responsive:!0},className:a.plot})},me=Object(g.a)((function(e){return{card:{padding:e.spacing(2)}}})),je=function(){var e=me();return Object(n.jsxs)($.a,{container:!0,spacing:1,children:[Object(n.jsx)($.a,{item:!0,xs:12,lg:6,xl:4,children:Object(n.jsx)(F.a,{className:e.card,variant:"outlined",children:Object(n.jsx)(se,{})})}),Object(n.jsx)($.a,{item:!0,xs:12,lg:6,xl:4,children:Object(n.jsx)(F.a,{className:e.card,variant:"outlined",children:Object(n.jsx)(ue,{})})}),Object(n.jsx)($.a,{item:!0,xs:12,lg:6,xl:4,children:Object(n.jsx)(F.a,{className:e.card,variant:"outlined",children:Object(n.jsx)(le,{})})}),Object(n.jsx)($.a,{item:!0,xs:12,lg:6,xl:4,children:Object(n.jsx)(F.a,{className:e.card,variant:"outlined",children:Object(n.jsx)(be,{})})})]})},he=function(){return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("h2",{id:"modal-title",children:"Modal title"}),Object(n.jsx)("p",{id:"modal-description",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec non suscipit erat, vel ultrices erat. Quisque eget semper justo, vitae mollis ex. Nulla at justo nulla. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Nunc pharetra tincidunt odio, sit amet rutrum eros tempus sit amet. Aliquam placerat, tortor non tincidunt commodo, velit enim rutrum leo, non molestie neque risus et velit. Proin lobortis leo in odio pellentesque gravida. Integer in libero eu urna feugiat imperdiet at ac risus. In ac ipsum eleifend, facilisis nulla vel, ornare neque. Donec elementum, erat vitae ornare bibendum, risus mi congue mauris, ac porttitor nisl orci vitae justo. Donec nec interdum ipsum, id volutpat ante. Pellentesque eu quam molestie, lobortis lorem vel, mattis felis."})]})},Oe=function(){var e=Object(p.c)((function(e){return e.presentation.isDark})),t=Object(u.a)("(prefers-color-scheme: dark)"),a=Object(d.a)({palette:{type:t||e?"dark":"light",primary:{main:t||e?"#212121":"#3f51b5"}}});return Object(n.jsxs)(b.a,{theme:a,children:[Object(n.jsx)(m.a,{}),Object(n.jsx)(l.a,{children:Object(n.jsxs)(c.d,{children:[Object(n.jsx)(c.a,{from:"\\/[\\s\\S]+",to:"/"}),Object(n.jsx)(c.b,{exact:!0,path:"/",children:Object(n.jsx)(Q,{sidebarContent:Object(n.jsx)(ae,{}),mainContent:Object(n.jsx)(je,{}),helpContent:Object(n.jsx)(he,{})})})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ge=a(39),xe=function(e){var t=Array.from({length:e.N_pulse},(function(t,a){return a/(e.N_pulse-1)*e.T_pulse})),a=[],n=[];switch(e.shape){case 1:a=Array.from({length:e.N_pulse},(function(t,a){return e.amp_pulse})),n=Array.from({length:e.N_pulse},(function(e,t){return 0}));break;case 2:a=t.map((function(t){return e.amp_pulse*Math.sin(Math.PI*(e.lobes+1)/e.T_pulse*(t-e.T_pulse/2))/(Math.PI*(e.lobes+1)/e.T_pulse*(t-e.T_pulse/2))})),n=Array.from({length:e.N_pulse},(function(e,t){return 0}));break;case 3:a=t.map((function(t){return e.amp_pulse*Math.sin(Math.PI*(e.lobes+1)/e.T_pulse*(t-e.T_pulse/2))/(Math.PI*(e.lobes+1)/e.T_pulse*(t-e.T_pulse/2))*(.54+.46*Math.cos(Math.PI*(e.lobes+1)/e.T_pulse*(t-e.T_pulse/2)/Math.round(e.lobes/2)))})),n=Array.from({length:e.N_pulse},(function(e,t){return 0}));break;case 4:a=t.map((function(t){return e.amp_pulse*Math.exp(-1*Math.pow(t-e.T_pulse/2,2)/(2*Math.pow(e.sd,2)))})),n=Array.from({length:e.N_pulse},(function(e,t){return 0}));break;default:return{t_vec:t,B1_x_vec:a,B1_y_vec:n}}return{t_vec:t,B1_x_vec:a,B1_y_vec:n}},_e=function(e){return{Gz_vec:Array.from({length:e.N_pulse},(function(t,a){return e.amp_Gz}))}},fe={B0:3,gamma:42.5775,T1:950,T2:100,T_pulse:10,N_pulse:100,dt_pulse:.1,amp_pulse:.001,shape_options:[{value:1,label:"rect"},{value:2,label:"sinc"},{value:3,label:"Hm(sinc)"},{value:4,label:"Gaussian"}],shape:2,lobes:3,sd:1,amp_Gz:30,l_profile:5,N_profile:100,dl_profile:.05,isBusy:!1},ve={params:fe,output:Object(Y.a)(Object(Y.a)(Object(Y.a)({},xe(fe)),_e(fe)),{},{Mx_vec:[],My_vec:[],Mxy_vec:[],Mz_vec:[],z_vec:[],SPx_vec:[],SPy_vec:[],SPxy_vec:[],SPz_vec:[]})},ye=function(e,t){for(var a=0,n=Object.entries(t);a<n.length;a++){var r=Object(j.a)(n[a],2),i=r[0],s=r[1],o={};switch(i){case"B0":case"gamma":case"T1":case"T2":o=Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s));break;case"T_pulse":o=Object(Y.a)(Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s)),{dt_pulse:s/e.params.N_pulse});break;case"N_pulse":o=Object(Y.a)(Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s)),{dt_pulse:e.params.T_pulse/s});break;case"dt_pulse":o=Object(Y.a)(Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s)),{T_pulse:e.params.N_pulse*s});break;case"amp_pulse":case"shape":case"lobes":case"sd":case"amp_Gz":o=Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s));break;case"l_profile":o=Object(Y.a)(Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s)),{dl_profile:s/e.params.N_profile});break;case"N_profile":o=Object(Y.a)(Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s)),{dl_profile:e.params.l_profile/s});break;case"dl_profile":o=Object(Y.a)(Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s)),{dl_profile:e.params.N_profile*s});break;case"isBusy":o=Object(Y.a)(Object(Y.a)({},e.params),Object(h.a)({},i,s));break;default:return e}return{params:o,output:Object(Y.a)(Object(Y.a)(Object(Y.a)({},e.output),xe(o)),_e(o))}}},Me=a(56),we=a.n(Me),Te=function(e){var t=2*Math.PI*e.params.gamma*Math.pow(10,6),a=e.params.T1/Math.pow(10,3),n=e.params.T2/Math.pow(10,3),r=e.params.T_pulse/Math.pow(10,3),i=e.params.dt_pulse/Math.pow(10,3),s=e.output.t_vec.map((function(e){return e/Math.pow(10,3)})),o=e.output.B1_x_vec.map((function(e){return e/Math.pow(10,3)})),l=e.output.B1_y_vec.map((function(e){return e/Math.pow(10,3)})),c=[0,0,1],p=i,u=we()(c,(function(e,i,c){var p=0,u=0;if(c<r){var d=s.findIndex((function(e){return e>c})),b=(c-s[d-1])/(s[d]-s[d-1]);p=o[d-1]+b*(o[d]-o[d-1]),u=l[d-1]+b*(l[d]-l[d-1])}e[0]=-1/n*i[0]+t*u*i[2],e[1]=-1/n*i[1]+t*p*i[2],e[2]=t*u*i[0]-t*p*i[1]-1/a*i[2]+1/a}),0,p),d=[c[0]],b=[c[1]],m=[Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))],j=[c[2]];return s.slice(1).forEach((function(e){u.steps(1/0,e),d.push(u.y[0]),b.push(u.y[1]),m.push(Math.sqrt(Math.pow(u.y[0],2)+Math.pow(u.y[1],2))),j.push(u.y[2])})),{params:Object(Y.a)({},e.params),output:Object(Y.a)(Object(Y.a)({},e.output),{Mx_vec:d,My_vec:b,Mxy_vec:m,Mz_vec:j})}},Be=function(e){var t=2*Math.PI*e.params.gamma*Math.pow(10,6),a=e.params.T1/Math.pow(10,3),n=e.params.T2/Math.pow(10,3),r=e.params.T_pulse/Math.pow(10,3),i=e.params.dt_pulse/Math.pow(10,3),s=e.params.l_profile/Math.pow(10,3),o=e.params.N_profile,l=e.output.t_vec.map((function(e){return e/Math.pow(10,3)})),c=e.output.B1_x_vec.map((function(e){return e/Math.pow(10,3)})),p=e.output.B1_y_vec.map((function(e){return e/Math.pow(10,3)})),u=Array.from({length:o},(function(e,t){return-s/2+s/(o-1)*t})),d=e.output.Gz_vec.map((function(e){return e/Math.pow(10,3)})),b=[],m=[],j=[],h=[];return u.forEach((function(e){var s=i,o=we()([0,0,1],(function(i,s,o){var u=0,b=0,m=0;if(o<r){var j=l.findIndex((function(e){return e>o})),h=(o-l[j-1])/(l[j]-l[j-1]),O=d[j-1]+h*(d[j]-d[j-1]);u=t*O*e}if(o<r){var g=l.findIndex((function(e){return e>o})),x=(o-l[g-1])/(l[g]-l[g-1]);b=c[g-1]+x*(c[g]-c[g-1]),m=p[g-1]+x*(p[g]-p[g-1])}i[0]=-1/n*s[0]+t*m*s[2]+u*s[1],i[1]=-1/n*s[1]+t*b*s[2]-u*s[0],i[2]=t*m*s[0]-t*b*s[1]-1/a*s[2]+1/a}),0,s);o.steps(1/0,r),b.push(o.y[0]),m.push(o.y[1]),j.push(Math.sqrt(Math.pow(o.y[0],2)+Math.pow(o.y[1],2))),h.push(o.y[2])})),{params:Object(Y.a)(Object(Y.a)({},e.params),{isBusy:!1}),output:Object(Y.a)(Object(Y.a)({},e.output),{z_vec:u.map((function(e){return e*Math.pow(10,3)})),SPx_vec:b,SPy_vec:m,SPxy_vec:j,SPz_vec:h})}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return ye(e,t.payload);case k:return Te(e);case P:return Be(e);case z:return{params:Object(Y.a)({},e.params),output:Object(Y.a)(Object(Y.a)({},e.output),{Mx_vec:[],My_vec:[],Mxy_vec:[],Mz_vec:[],z_vec:[],SPx_vec:[],SPy_vec:[],SPxy_vec:[],SPz_vec:[]})};case S:return ve;default:return e}},ke={isDark:!1},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(Y.a)(Object(Y.a)({},e),{isDark:!e.isDark});default:return e}},ze=Object(ge.b)({simulation:Ne,presentation:Pe}),Se=Object(ge.c)(ze,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(p.a,{store:Se,children:Object(n.jsx)(Oe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[98,1,2]]]);
//# sourceMappingURL=main.e311799e.chunk.js.map