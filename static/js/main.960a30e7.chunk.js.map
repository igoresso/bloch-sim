{"version":3,"sources":["layouts/Main/components/Footer/Footer.js","layouts/Main/components/Sidebar/Sidebar.js","actions/types.js","layouts/Main/components/Topbar/Topbar.js","actions/presentation.js","layouts/Main/components/Dialog/Dialog.js","layouts/Main/Main.js","actions/simulation.js","components/Controls/Controls.js","components/Output/components/Pulse/Pulse.js","components/Output/components/Magnetisation/Magnetisation.js","components/Output/components/Sphere/generateSphere.js","components/Output/components/Sphere/Sphere.js","components/Output/components/Profile/Profile.js","components/Output/Output.js","components/Help/Help.js","App.js","serviceWorker.js","reducers/simulation/generatePulse.js","reducers/simulation/generateGradient.js","reducers/simulation/initialState.js","reducers/simulation/update.js","reducers/simulation/simulate.js","reducers/simulation/estimateProfile.js","reducers/simulation/simulation.js","reducers/presentation/initialState.js","reducers/presentation/presentation.js","reducers/index.js","index.js"],"names":["Footer","props","className","Typography","align","useStyles","makeStyles","theme","drawer","width","padding","spacing","breakpoints","up","marginTop","height","Sidebar","isOpen","handleSidebarClose","variant","children","classes","Drawer","anchor","paper","onClose","open","UPDATE","SIMULATE","ESTIMATE_PROFILE","CLEAR","RESET","TOGGLE_THEME","root","boxShadow","logo","marginRight","button","marginLeft","Topbar","handleSidebarOpen","handleModalOpen","dispatch","useDispatch","AppBar","Toolbar","noWrap","Tooltip","title","IconButton","edge","color","aria-label","onClick","type","Brightness4","Hidden","mdUp","Menu","position","closeButton","right","top","palette","primary","Dialog","handleDialogClose","Paper","Close","paddingTop","contentShift","paddingLeft","content","display","flexDirection","paddingBottom","shiftContent","modal","justifyContent","alignItems","maxWidth","margin","footer","Main","sidebarContent","mainContent","helpContent","useTheme","isDesktop","useMediaQuery","defaultMatches","useState","openSidebar","setOpenSidebar","openModal","setOpenModal","handleModalClose","shouldOpenSidebar","clsx","Modal","aria-labelledby","aria-describedby","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","update","variable","payload","marginBottom","Controls","params","useSelector","state","simulation","formState","setFormState","isActive","setIsActive","handleFieldChange","e","Number","target","value","name","updateParameter","autoComplete","component","Grid","container","item","xs","TextField","label","id","inputProps","step","min","B0","onChange","onBlur","disabled","isBusy","gamma","T1","T2","m","T_pulse","N_pulse","dt_pulse","amp_pulse","select","SelectProps","native","shape","shape_options","map","option","lobes","sd","amp_Gz","l_profile","N_profile","dl_profile","Button","size","preventDefault","fullWidth","disableElevation","plot","Pulse","output","gridColor","zeroColor","textColor","data","mode","line","x","t_vec","y","B1_x_vec","B1_y_vec","yaxis","Gz_vec","layout","paper_bgcolor","plot_bgcolor","text","xaxis","range","gridcolor","zerolinecolor","linecolor","showspikes","standoff","showline","yaxis2","overlaying","side","font","modebar","bgcolor","activecolor","config","responsive","visible","Mxy_vec","Mx_vec","My_vec","Mz_vec","generateSphereMesh","N","n","Math","floor","z","phi","PI","p","theta","push","sin","cos","Sphere","sphereMesh","generateSphere","opacity","colorscale","hoverinfo","showlegend","l","r","b","t","scene","zaxis","camera","eye","modeBarButtonsToRemove","Profile","z_vec","SPxy_vec","SPx_vec","SPy_vec","SPz_vec","card","Simulation","lg","xl","Magnetisation","Help","Fragment","App","isDark","presentation","prefersDarkMode","createMuiTheme","main","ThemeProvider","CssBaseline","basename","process","from","to","exact","path","Output","Boolean","window","location","hostname","match","generatePulse","Array","length","v","i","round","exp","generateGradient","initialState","Object","entries","key","simulate","dt","B1_x","B1_y","M0","dt0","integrator","ode45","dMdt","M","Bx","By","index","findIndex","alpha","sqrt","slice","forEach","steps","Infinity","estimateProfile","Gz","delw0","simulatorReducer","action","visualReducer","rootReducer","combineReducers","presentationReducer","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.960a30e7.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst Footer = props => {\r\n  const { className } = props;\r\n  return (\r\n    <Typography\r\n      align=\"center\"\r\n      className={className}\r\n    >\r\n      Footer\r\n    </Typography>\r\n  );\r\n};\r\n\r\nFooter.propTypes = {\r\n  className: PropTypes.string\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { Drawer } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  drawer: {\r\n    width: 280,\r\n    padding: theme.spacing(3),\r\n    [theme.breakpoints.up('md')]: {\r\n      marginTop: 64,\r\n      height: 'calc(100% - 64px)'\r\n    }\r\n  },\r\n}));\r\n\r\nconst Sidebar = props => {\r\n  const { isOpen, handleSidebarClose, variant, children } = props;\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Drawer\r\n      anchor=\"left\"\r\n      classes={{ paper: classes.drawer }}\r\n      onClose={handleSidebarClose}\r\n      open={isOpen}\r\n      variant={variant}\r\n    >\r\n      {children}\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nSidebar.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  handleSidebarClose: PropTypes.func,\r\n  variant: PropTypes.string.isRequired,\r\n  children: PropTypes.node\r\n};\r\n\r\nexport default Sidebar;","export const UPDATE = 'UPDATE';\r\nexport const SIMULATE = 'SIMULATE';\r\nexport const ESTIMATE_PROFILE = 'ESTIMATE_PROFILE';\r\nexport const CLEAR = 'CLEAR';\r\nexport const RESET = 'RESET';\r\nexport const TOGGLE_THEME = 'TOGGLE_THEME';","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toggleTheme } from '../../../../actions/presentation';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { AppBar, Toolbar, Tooltip, IconButton, Typography, Hidden } from '@material-ui/core';\r\nimport { Menu, Help, Brightness4 } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    boxShadow: 'none'\r\n  },\r\n  logo: {\r\n    marginRight: 'auto'\r\n  },\r\n  button: {\r\n    marginLeft: theme.spacing(1)\r\n  }\r\n}));\r\n\r\nconst Topbar = props => {\r\n  const { handleSidebarOpen, handleModalOpen } = props;\r\n\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleThemeChange = () => {\r\n    dispatch(toggleTheme());\r\n  }\r\n\r\n  return (\r\n    <AppBar className={classes.root}>\r\n      <Toolbar>\r\n        <Typography \r\n          variant=\"h6\"\r\n          className={classes.logo}\r\n          noWrap\r\n        >\r\n          Bloch Equation Simulator\r\n        </Typography>\r\n        <Tooltip title=\"Toggle light/dark theme\">\r\n          <IconButton\r\n            edge=\"end\"\r\n            color=\"inherit\"\r\n            className={classes.button}\r\n            aria-label=\"Toggle light/dark theme\"\r\n            onClick={handleThemeChange}\r\n          >\r\n            <Brightness4 />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Tooltip title=\"User Manual\">\r\n          <IconButton\r\n            edge=\"end\"\r\n            color=\"inherit\"\r\n            className={classes.button}\r\n            aria-label=\"User Manual\"\r\n            onClick={handleModalOpen}\r\n          >\r\n            <Help />\r\n          </IconButton>\r\n        </Tooltip>\r\n        \r\n        <Hidden mdUp>\r\n          <IconButton\r\n            edge=\"end\"\r\n            color=\"inherit\"\r\n            className={classes.button}\r\n            aria-label=\"Open settings\"\r\n            onClick={handleSidebarOpen}\r\n          >\r\n            <Menu />\r\n          </IconButton>\r\n        </Hidden>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nTopbar.propTypes = {\r\n  handleSidebarOpen: PropTypes.func,\r\n  handleModalOpen: PropTypes.func\r\n};\r\n\r\nexport default Topbar;","import { TOGGLE_THEME } from './types';\r\n\r\nexport const toggleTheme = () => {\r\n  return {\r\n    type: TOGGLE_THEME\r\n  };\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Paper, IconButton } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    position: 'relative',\r\n    padding: theme.spacing(4)\r\n  },\r\n  closeButton: {\r\n    position: 'absolute',\r\n    right: theme.spacing(1),\r\n    top: theme.spacing(1),\r\n    color: theme.palette.primary,\r\n  }\r\n}));\r\n\r\nconst Dialog = props => {\r\n  const { children, handleDialogClose } = props;\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <IconButton aria-label=\"closeButton\" className={classes.closeButton} onClick={handleDialogClose}>\r\n        <Close />\r\n      </IconButton>\r\n      {children}\r\n    </Paper>\r\n  );\r\n};\r\n\r\nDialog.propTypes = {\r\n  children: PropTypes.node,\r\n  handleDialogClose: PropTypes.func\r\n};\r\n\r\nexport default Dialog;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/styles';\nimport { useMediaQuery, Fade, Modal, Backdrop } from '@material-ui/core';\n\nimport { Sidebar, Topbar, Footer, Dialog } from './components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100vh',\n    paddingTop: 56,\n    [theme.breakpoints.up('sm')]: {\n      paddingTop: 64\n    }\n  },\n  contentShift: {\n    paddingLeft: 280\n  },\n  content: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    padding: theme.spacing(2),\n    paddingBottom: 0\n  },\n  shiftContent: {\n    paddingLeft: 280\n  },\n  modal: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'flex-start',\n    maxWidth: '1000px',\n    margin: '10vh auto',\n    [theme.breakpoints.up('xs')]: {\n      padding: '0 2vh'\n    },\n    [theme.breakpoints.up('sm')]: {\n      padding: '0 5vh'\n    },\n    [theme.breakpoints.up('md')]: {\n      padding: '0 5vh'\n    },\n    [theme.breakpoints.up('lg')]: {\n      padding: '0'\n    },\n  },\n  footer : {\n    marginTop: 'auto',\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  }\n}));\n\nconst Main = props => {\n  const { sidebarContent, mainContent, helpContent } = props;\n\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const isDesktop = useMediaQuery(theme.breakpoints.up('md'), {\n    defaultMatches: true\n  });\n\n  const [openSidebar, setOpenSidebar] = useState(false);\n  const [openModal, setOpenModal] = useState(false);\n\n  const handleSidebarOpen = () => {\n    setOpenSidebar(true);\n  };\n\n  const handleSidebarClose = () => {\n    setOpenSidebar(false);\n  };\n\n  const handleModalOpen = () => {\n    setOpenModal(true);\n  };\n\n  const handleModalClose = () => {\n    setOpenModal(false);\n  };\n  \n  const shouldOpenSidebar = isDesktop ? true : openSidebar;\n\n  return (\n    <div \n      className={clsx({\n        [classes.root]: true,\n        [classes.shiftContent]: isDesktop\n      })}\n    >\n      <Topbar \n        handleSidebarOpen={handleSidebarOpen}\n        handleModalOpen={handleModalOpen}\n      />\n      <Sidebar\n        isOpen={shouldOpenSidebar}\n        handleSidebarClose={handleSidebarClose}\n        variant={isDesktop ? 'persistent' : 'temporary'}\n      >\n        {sidebarContent}\n      </Sidebar>\n      <main\n        className={classes.content}\n      >\n        {mainContent}\n        <Footer className={classes.footer} />\n        <Modal\n          aria-labelledby=\"modal-title\"\n          aria-describedby=\"modal-description\"\n          className={classes.modal}\n          open={openModal}\n          onClose={handleModalClose}\n          closeAfterTransition\n          BackdropComponent={Backdrop}\n          BackdropProps={{\n            timeout: 500,\n          }}\n        >\n          <Fade in={openModal}>\n            <Dialog handleDialogClose={handleModalClose}>\n              {helpContent}\n            </Dialog>\n          </Fade>\n        </Modal>\n      </main>\n    </div>\n  );\n};\n\nMain.propTypes = {\n  sidebarContent: PropTypes.any.isRequired,\n  mainContent: PropTypes.any.isRequired,\n  helpContent: PropTypes.any.isRequired\n}\n\nexport default Main;","import { UPDATE, SIMULATE, ESTIMATE_PROFILE, CLEAR, RESET } from './types';\r\n\r\nexport const update = (variable) => {\r\n  return {\r\n    type: UPDATE,\r\n    payload: variable\r\n  };\r\n};\r\n\r\nexport const simulate = () => {\r\n  return {\r\n    type: SIMULATE,\r\n  };\r\n};\r\n\r\nexport const estimateProfile = () => {\r\n  return {\r\n    type: ESTIMATE_PROFILE,\r\n  };\r\n};\r\n\r\nexport const clear = () => {\r\n  return {\r\n    type: CLEAR,\r\n  };\r\n};\r\n\r\nexport const reset = () => {\r\n  return {\r\n    type: RESET,\r\n  };\r\n};\r\n\r\n","import React, { useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { update, simulate, estimateProfile, clear } from '../../actions/simulation';\r\nimport { Grid, TextField, Typography, Button } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginBottom: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nconst Controls = () => {\r\n  const params = useSelector(state => state.simulation.params);\r\n  const [formState, setFormState] = useState(params);\r\n  const [isActive, setIsActive] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleFieldChange = (e) => {\r\n    if (Number(e.target.value) !== formState[e.target.name]) {\r\n      setFormState({\r\n        ...params,\r\n        ...{[e.target.name]: Number(e.target.value)}\r\n      })\r\n      setIsActive(true);\r\n    }\r\n  };\r\n\r\n  const updateParameter = (e) => {\r\n    if (Number(e.target.value) !== params[e.target.name]) {\r\n      dispatch(update({\r\n        [e.target.name]: Number(e.target.value)\r\n      }));\r\n      dispatch(clear());\r\n      setIsActive(false);\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    dispatch(update({\r\n      isBusy: true\r\n    }));\r\n    dispatch(simulate())\r\n    dispatch(estimateProfile())\r\n  }\r\n\r\n  return (\r\n    <form autoComplete=\"off\">\r\n      <Typography variant=\"h6\" component=\"h2\" align=\"center\">\r\n        General\r\n      </Typography>\r\n      <Grid container spacing={1} className={classes.root}>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"B&#x2080; (T)\"\r\n            id=\"B0\"\r\n            name=\"B0\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.B0 : params.B0}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"&#947; (MHz/T)\"\r\n            id=\"gamma\"\r\n            name=\"gamma\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.gamma : params.gamma}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"T&#8321; (ms)\"\r\n            id=\"T1\"\r\n            name=\"T1\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.T1 : params.T1}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"T&#x2082; (ms)\"\r\n            id=\"T2\"\r\n            name=\"T2\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.T2 : params.T2}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Typography variant=\"h6\" component=\"h2\" align=\"center\">\r\n        Pulse\r\n      </Typography>\r\n      <Grid container spacing={1} m={2} className={classes.root}>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"T (ms)\"\r\n            id=\"T_pulse\"\r\n            name=\"T_pulse\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.T_pulse : params.T_pulse}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"N\"\r\n            id=\"N_pulse\"\r\n            name=\"N_pulse\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.N_pulse : params.N_pulse}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"dt (ms)\"\r\n            id=\"dt_pulse\"\r\n            name=\"dt_pulse\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.dt_pulse : params.dt_pulse}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n        <TextField\r\n            label={<>B<sub>1, max</sub> (mT)</>}\r\n            id=\"amp_pulse\"\r\n            name=\"amp_pulse\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any' }}\r\n            value={isActive ? formState.amp_pulse : params.amp_pulse}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"Shape\"\r\n            id=\"shape\"\r\n            name=\"shape\"\r\n            select\r\n            SelectProps={{\r\n              native: true,\r\n            }}\r\n            value={params.shape}\r\n            onChange={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          >\r\n            {params.shape_options.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n            </option>\r\n            ))}\r\n          </TextField>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"Lobes\"\r\n            id=\"lobes\"\r\n            name=\"lobes\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.lobes : params.lobes}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.shape!==2 || params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"&#963; (ms)\"\r\n            id=\"sd\"\r\n            name=\"sd\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any' }}\r\n            value={isActive ? formState.sd : params.sd}\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.shape!==4 || params.isBusy}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Typography variant=\"h6\" component=\"h2\" align=\"center\">\r\n        Gradient\r\n      </Typography>\r\n      <Grid container spacing={1} m={2} className={classes.root}>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label={<>G<sub>z</sub> (mT/m)</>}\r\n            id=\"amp_Gz\"\r\n            name=\"amp_Gz\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.amp_Gz : params.amp_Gz }\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Typography variant=\"h6\" component=\"h2\" align=\"center\">\r\n        Slice Profile\r\n      </Typography>\r\n      <Grid container spacing={1} m={2} className={classes.root}>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"l (mm)\"\r\n            id=\"l_profile\"\r\n            name=\"l_profile\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.l_profile : params.l_profile }\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"N\"\r\n            id=\"N_profile\"\r\n            name=\"N_profile\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.N_profile : params.N_profile }\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            label=\"dl (mm)\"\r\n            id=\"dl_profile\"\r\n            name=\"dl_profile\"\r\n            type=\"number\"\r\n            inputProps={{ step:'any', min: 0 }}\r\n            value={isActive ? formState.dl_profile : params.dl_profile }\r\n            onChange={handleFieldChange}\r\n            onBlur={updateParameter}\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            disabled = {params.isBusy}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Button\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        size=\"large\"\r\n        type=\"submit\"\r\n        onClick={handleSubmit}\r\n        disabled={params.isBusy}\r\n        fullWidth\r\n        disableElevation\r\n      >\r\n        {params.isBusy ?  'Working' : 'Simulate'}\r\n      </Button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Controls;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Plot from 'react-plotly.js';\r\nimport { makeStyles, useTheme } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  plot: {\r\n    width: '100%'\r\n  }\r\n}));\r\n\r\nconst Pulse = () => {\r\n  const output = useSelector(state => state.simulation.output);\r\n\r\n  const classes = useStyles();\r\n\r\n  const theme = useTheme();\r\n  const gridColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)';\r\n  const zeroColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 0.8)' : 'rgba(0, 0, 0, 0.4)';\r\n  const textColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 1)' : 'rgba(0, 0, 0, 0.8)';\r\n\r\n  const data = [\r\n    {\r\n      name: \"B1_x\",\r\n      type: \"scattergl\",\r\n      mode: \"lines\",\r\n      line: {\r\n        width: 3,\r\n        color: '#ff8f7b',\r\n      },\r\n      x: output.t_vec,\r\n      y: output.B1_x_vec\r\n    },\r\n    {\r\n      name: \"B1_y\",\r\n      type: \"scattergl\",\r\n      mode: \"lines\",\r\n      line: {\r\n        width: 3,\r\n        color: '#fbb84d',\r\n      },\r\n      x: output.t_vec,\r\n      y: output.B1_y_vec\r\n    },\r\n    {\r\n      name: \"Gz\",\r\n      type: \"scattergl\",\r\n      yaxis: 'y2',\r\n      mode: \"lines\",\r\n      line: {\r\n        width: 3,\r\n        color: '#02ffb3',\r\n      },\r\n      x: output.t_vec,\r\n      y: output.Gz_vec\r\n    },\r\n  ];\r\n\r\n  const layout = {\r\n    height: 450,\r\n    paper_bgcolor: \"transparent\",\r\n    plot_bgcolor: \"transparent\",\r\n    title: {\r\n      text: \"Excitation Pattern\"\r\n    },\r\n    xaxis: {\r\n      title: {\r\n        text: 'Time (ms)'\r\n      },\r\n      type: 'linear',\r\n      range: [0, output.T_pulse],\r\n      gridcolor: gridColor,\r\n      zerolinecolor: zeroColor,\r\n      linecolor: gridColor,\r\n      showspikes: false\r\n    },\r\n    yaxis: {\r\n      title: {\r\n        text: 'Amplitude (mT)',\r\n        standoff: 5\r\n      },\r\n      type: 'linear',\r\n      gridcolor: gridColor,\r\n      zerolinecolor: zeroColor,\r\n      linecolor: gridColor,\r\n      showspikes: false,\r\n      showline: true\r\n    },\r\n    yaxis2: {\r\n      title: 'Gradient (mT/m)',\r\n      overlaying: 'y',\r\n      side: 'right',\r\n      gridcolor: gridColor,\r\n      zerolinecolor: zeroColor,\r\n      linecolor: gridColor,\r\n      showspikes: false\r\n    },\r\n    font: {\r\n      color: textColor\r\n    },\r\n    modebar: {\r\n      bgcolor: 'transparent',\r\n      color: gridColor,\r\n      activecolor: zeroColor\r\n    }\r\n  }\r\n\r\n  const config = {\r\n    responsive: true\r\n  }\r\n\r\n  return (\r\n    <Plot data={data} layout={layout} config={config} className={classes.plot} />\r\n  );\r\n};\r\n\r\nexport default Pulse;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Plot from 'react-plotly.js';\r\nimport { makeStyles, useTheme } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  plot: {\r\n    width: '100%'\r\n  }\r\n}));\r\n\r\nconst Pulse = () => {\r\n  const output = useSelector(state => state.simulation.output);\r\n  const T_pulse = useSelector(state => state.simulation.params.T_pulse);\r\n\r\n  const classes = useStyles();\r\n\r\n  const theme = useTheme();\r\n  const gridColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)';\r\n  const zeroColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 0.8)' : 'rgba(0, 0, 0, 0.4)';\r\n  const textColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 1)' : 'rgba(0, 0, 0, 0.8)';\r\n\r\n\r\n  const data = [\r\n    {\r\n      name: \"M_xy\",\r\n      type: \"scattergl\",\r\n      mode: \"lines\",\r\n      visible: \"legendonly\",\r\n      line: {\r\n        width: 3,\r\n        color: '#ff7eb8',\r\n      },\r\n      x: output.t_vec,\r\n      y: output.Mxy_vec\r\n    },\r\n    {\r\n      name: \"M_x\",\r\n      type: \"scattergl\",\r\n      mode: \"lines\",\r\n      line: {\r\n        width: 3,\r\n        color: '#ff8f7b',\r\n      },\r\n      x: output.t_vec,\r\n      y: output.Mx_vec\r\n    },\r\n    {\r\n      name: \"M_y\",\r\n      type: \"scattergl\",\r\n      mode: \"lines\",\r\n      line: {\r\n        width: 3,\r\n        color: '#fbb84d',\r\n      },\r\n      x: output.t_vec,\r\n      y: output.My_vec\r\n    },\r\n    {\r\n      name: \"M_z\",\r\n      type: \"scatter\",\r\n      mode: \"lines\",\r\n      line: {\r\n        width: 3,\r\n        color: '#b7e15d',\r\n      },\r\n      x: output.t_vec,\r\n      y: output.Mz_vec\r\n    },\r\n  ];\r\n\r\n  const layout = {\r\n    height: 450,\r\n    paper_bgcolor: \"transparent\",\r\n    plot_bgcolor: \"transparent\",\r\n    title: {\r\n      text: \"Magnetisation\"\r\n    },\r\n    xaxis: {\r\n      title: {\r\n        text: 'Time (ms)'\r\n      },\r\n      type: 'linear',\r\n      range: [0, T_pulse],\r\n      gridcolor: gridColor,\r\n      zerolinecolor: zeroColor,\r\n      linecolor: gridColor,\r\n      showspikes: false\r\n    },\r\n    yaxis: {\r\n      title: {\r\n        text: 'Normalized Magnetisation',\r\n        standoff: 5\r\n      },\r\n      type: 'linear',\r\n      gridcolor: gridColor,\r\n      zerolinecolor: zeroColor,\r\n      linecolor: gridColor,\r\n      showspikes: false\r\n    },\r\n    font: {\r\n      color: textColor\r\n    },\r\n    modebar: {\r\n      bgcolor: 'transparent',\r\n      color: gridColor,\r\n      activecolor: zeroColor\r\n    }\r\n  }\r\n\r\n  const config = {\r\n    responsive: true\r\n  }\r\n\r\n  return (\r\n    <Plot data={data} layout={layout} config={config} className={classes.plot} />\r\n  );\r\n};\r\n\r\nexport default Pulse;","const generateSphereMesh = (N=20) => {\r\n  const n = 2 * Math.floor(N/2);\r\n  let x = [];\r\n  let y = [];\r\n  let z = [];\r\n\r\n  for (let m = 0; m < n / 2; m++) {\r\n    const phi = 2 * Math.PI / n * (m+1);\r\n    \r\n    for (let p = 0; p <= 2*n; p++) {\r\n      const theta = Math.PI * p / n;\r\n\r\n      x.push(Math.sin(theta)*Math.cos(phi))\r\n      y.push(Math.sin(theta)*Math.sin(phi))\r\n      z.push(Math.cos(theta))\r\n\r\n      if (m === n/2-1 && p === n) {\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  for (let p = n-1; p > 0; p--) {\r\n    const theta = -Math.PI * p / n;\r\n    \r\n    for (let m = 0; m <= n; m++) {\r\n      const phi = 2 * Math.PI * m / n + Math.PI;\r\n      \r\n      x.push(Math.sin(theta)*Math.cos(phi))\r\n      y.push(Math.sin(theta)*Math.sin(phi))\r\n      z.push(Math.cos(theta))\r\n    }\r\n  }\r\n      \r\n  return { x, y, z }\r\n}\r\n\r\nexport default generateSphereMesh;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Plot from 'react-plotly.js';\r\nimport { makeStyles, useTheme } from '@material-ui/styles';\r\n\r\nimport generateSphere from './generateSphere';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  plot: {\r\n    width: '100%'\r\n  }\r\n}));\r\n\r\nconst Sphere = () => {\r\n  const output = useSelector(state => state.simulation.output);\r\n\r\n  const classes = useStyles();\r\n\r\n  const theme = useTheme();\r\n  const gridColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';\r\n  const zeroColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 0.9)' : 'rgba(0, 0, 0, 0.4)';\r\n  const textColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 1)' : 'rgba(0, 0, 0, 0.8)';\r\n\r\n\r\n  const sphereMesh = generateSphere();\r\n\r\n  const data = [\r\n    {\r\n      type: \"scatter3d\",\r\n      mode: \"lines\",\r\n      opacity: 0.2,\r\n      line: {\r\n        width: 2,\r\n        color: sphereMesh.z,\r\n        colorscale: \"Portland\",\r\n      },\r\n      hoverinfo: \"none\",\r\n      showlegend: false,\r\n      ...sphereMesh,\r\n    },\r\n    {\r\n      type: \"scatter3d\",\r\n      mode: \"lines\",\r\n      line: {\r\n        width: 5,\r\n        color: \"#ff0000\",\r\n      },\r\n      hoverinfo: \"none\",\r\n      showlegend: false,\r\n      x: output.Mx_vec,\r\n      y: output.My_vec,\r\n      z: output.Mz_vec,\r\n    }\r\n  ];\r\n\r\n  const layout = {\r\n    margin: { l: 0, r: 0, b: 0, t: 0 },\r\n    height: 450,\r\n    paper_bgcolor: \"transparent\",\r\n    scene: {\r\n      bgcolor: \"transparent\",\r\n      xaxis: {\r\n        title: \"X\",\r\n        range: [-1, 1],\r\n        type: 'linear',\r\n        gridcolor: gridColor,\r\n        zerolinecolor: zeroColor,\r\n        linecolor: gridColor,\r\n        showspikes: false,\r\n        \r\n      },\r\n      yaxis: {\r\n        title: \"Y\",\r\n        range: [-1, 1],\r\n        type: 'linear',\r\n        gridcolor: gridColor,\r\n        zerolinecolor: zeroColor,\r\n        linecolor: gridColor,\r\n        showspikes: false,\r\n      },\r\n      zaxis: {\r\n        title: \"Z\",\r\n        range: [-1, 1],\r\n        type: 'linear',\r\n        gridcolor: gridColor,\r\n        zerolinecolor: gridColor,\r\n        linecolor: gridColor,\r\n        showspikes: false,\r\n      },\r\n      camera: {\r\n        eye: {x: 1.3, y: 1.3, z: 1.3},\r\n      },\r\n    },\r\n    font: {\r\n      color: textColor\r\n    },\r\n    modebar: {\r\n      bgcolor: 'transparent',\r\n      color: gridColor,\r\n      activecolor: zeroColor\r\n    }\r\n  }\r\n\r\n  const config = {\r\n    responsive: true,\r\n    modeBarButtonsToRemove: ['hoverClosest3d']\r\n  }\r\n\r\n  return (\r\n    <Plot data={data} layout={layout} config={config} className={classes.plot} />\r\n  );\r\n};\r\n\r\nexport default Sphere;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Plot from 'react-plotly.js';\nimport { makeStyles, useTheme } from '@material-ui/styles';\n\nconst useStyles = makeStyles(theme => ({\n  plot: {\n    width: '100%'\n  }\n}));\n\nconst Profile = () => {\n  const output = useSelector(state => state.simulation.output);\n  const l_profile = useSelector(state => state.simulation.params.l_profile);\n\n  const classes = useStyles();\n\n  const theme = useTheme();\n  const gridColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)';\n  const zeroColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 0.8)' : 'rgba(0, 0, 0, 0.4)';\n  const textColor = theme.palette.type === \"dark\" ? 'rgba(255, 255, 255, 1)' : 'rgba(0, 0, 0, 0.8)';\n\n  const data = [\n    {\n      name: \"M_xy\",\n      type: \"scattergl\",\n      mode: \"lines\",\n      line: {\n        width: 3,\n        color: '#ff7eb8',\n      },\n      x: output.z_vec,\n      y: output.SPxy_vec\n    },\n    {\n      name: \"M_x\",\n      type: \"scattergl\",\n      mode: \"lines\",\n      visible: \"legendonly\",\n      line: {\n        width: 3,\n        color: '#ff8f7b',\n      },\n      x: output.z_vec,\n      y: output.SPx_vec\n    },\n    {\n      name: \"M_y\",\n      type: \"scattergl\",\n      mode: \"lines\",\n      visible: \"legendonly\",\n      line: {\n        width: 3,\n        color: '#fbb84d',\n      },\n      x: output.z_vec,\n      y: output.SPy_vec\n    },\n    {\n      name: \"M_z\",\n      type: \"scattergl\",\n      mode: \"lines\",\n      visible: \"legendonly\",\n      line: {\n        width: 3,\n        color: '#b7e15d',\n      },\n      x: output.z_vec,\n      y: output.SPz_vec\n    }\n  ];\n\n  const layout = {\n    height: 450,\n    paper_bgcolor: \"transparent\",\n    plot_bgcolor: \"transparent\",\n    title: {\n      text: \"Slice Profile\"\n    },\n    xaxis: {\n      title: {\n        text: 'z (mm)'\n      },\n      type: 'linear',\n      range: [-l_profile/2, l_profile/2],\n      gridcolor: gridColor,\n      zerolinecolor: zeroColor,\n      linecolor: gridColor,\n      showspikes: false\n    },\n    yaxis: {\n      title: {\n        text: 'Normalised Magnetisation',\n        standoff: 5\n      },\n      type: 'linear',\n      gridcolor: gridColor,\n      zerolinecolor: zeroColor,\n      linecolor: gridColor,\n      showspikes: false,\n      showline: true\n    },\n    font: {\n      color: textColor\n    },\n    modebar: {\n      bgcolor: 'transparent',\n      color: gridColor,\n      activecolor: zeroColor\n    }\n  }\n\n  const config = {\n    responsive: true\n  }\n\n  return (\n    <Plot data={data} layout={layout} config={config} className={classes.plot} />\n  );\n};\n\nexport default Profile;","import React from 'react';\r\nimport { Grid, Paper } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { Pulse, Magnetisation, Sphere, Profile } from './components'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  card: {\r\n    padding: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nconst Simulation = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid container spacing={1}>\r\n      <Grid item xs={12} lg={6} xl={4}>\r\n        <Paper className={classes.card} variant=\"outlined\">\r\n          <Pulse />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={12} lg={6} xl={4}>\r\n        <Paper className={classes.card} variant=\"outlined\">\r\n          <Sphere />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={12} lg={6} xl={4}>\r\n        <Paper className={classes.card} variant=\"outlined\">\r\n          <Magnetisation />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={12} lg={6} xl={4}>\r\n        <Paper className={classes.card} variant=\"outlined\">\r\n          <Profile />\r\n        </Paper>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Simulation;","import React from 'react';\r\n\r\nconst Help = () => {\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h2 id=\"modal-title\">Modal title</h2>\r\n      <p id=\"modal-description\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec non suscipit erat, vel ultrices erat. Quisque eget semper justo, vitae mollis ex. Nulla at justo nulla. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Nunc pharetra tincidunt odio, sit amet rutrum eros tempus sit amet. Aliquam placerat, tortor non tincidunt commodo, velit enim rutrum leo, non molestie neque risus et velit. Proin lobortis leo in odio pellentesque gravida. Integer in libero eu urna feugiat imperdiet at ac risus. In ac ipsum eleifend, facilisis nulla vel, ornare neque. Donec elementum, erat vitae ornare bibendum, risus mi congue mauris, ac porttitor nisl orci vitae justo. Donec nec interdum ipsum, id volutpat ante. Pellentesque eu quam molestie, lobortis lorem vel, mattis felis.</p>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Help;","import React from 'react'\nimport { \n  BrowserRouter as Router,\n  Switch,\n  Redirect,\n  Route\n} from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport {\n  createMuiTheme,\n  ThemeProvider,\n  CssBaseline,\n  useMediaQuery\n} from '@material-ui/core';\n\nimport { Main as MainLayout } from './layouts';\nimport { Controls, Output, Help } from './components';\n\nconst App = () => {\n  const isDark = useSelector(state => state.presentation.isDark);\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n\n  const theme = createMuiTheme({\n    palette: {\n      type: prefersDarkMode || isDark ? 'dark' : 'light',\n      primary: {\n        main: prefersDarkMode || isDark ? '#212121' : '#3f51b5'\n      },\n    },\n  })\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n        <Router basename={process.env.PUBLIC_URL}>\n          <Switch>\n            <Redirect\n              from=\"\\/[\\s\\S]+\"\n              to=\"/\"\n            />\n            <Route\n              exact\n              path=\"/\"\n            >\n            <MainLayout\n              sidebarContent = {<Controls />}\n              mainContent = {<Output />}\n              helpContent = {<Help />}\n            />\n          </Route>\n        </Switch>\n      </Router>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const generatePulse = params => {\r\n  let t_vec = Array.from({ length: params.N_pulse }, (v, i) => i/(params.N_pulse-1)*params.T_pulse);\r\n  let B1_x_vec = [];\r\n  let B1_y_vec = [];\r\n\r\n  switch (params.shape) {\r\n    case 1:\r\n      B1_x_vec = Array.from({ length: params.N_pulse }, (v, i) => params.amp_pulse);\r\n      B1_y_vec = Array.from({ length: params.N_pulse }, (v, i) => 0);\r\n      break\r\n    case 2:\r\n      B1_x_vec = t_vec.map(t =>\r\n        params.amp_pulse*Math.sin(Math.PI*(params.lobes+1)/params.T_pulse*(t-params.T_pulse/2))/(Math.PI*(params.lobes+1)/params.T_pulse*(t-params.T_pulse/2))\r\n      );\r\n      B1_y_vec = Array.from({ length: params.N_pulse }, (v, i) => 0);\r\n      break\r\n    case 3:\r\n      const alpha = 0.46;\r\n      B1_x_vec = t_vec.map(t => \r\n        params.amp_pulse*Math.sin(Math.PI*(params.lobes+1)/params.T_pulse*(t-params.T_pulse/2))/(Math.PI*(params.lobes+1)/params.T_pulse*(t-params.T_pulse/2))\r\n        *((1-alpha)+alpha*Math.cos(Math.PI*(params.lobes+1)/params.T_pulse*(t-params.T_pulse/2)/Math.round(params.lobes/2)))\r\n      );\r\n      B1_y_vec = Array.from({ length: params.N_pulse }, (v, i) => 0);\r\n      break\r\n    case 4:\r\n      B1_x_vec = t_vec.map(t => \r\n        params.amp_pulse*Math.exp(-1*(t-params.T_pulse/2)**2/(2*params.sd**2))\r\n      );\r\n      B1_y_vec = Array.from({ length: params.N_pulse }, (v, i) => 0);\r\n      break\r\n    default:\r\n      return { t_vec, B1_x_vec, B1_y_vec }\r\n  }\r\n\r\n  return { t_vec, B1_x_vec, B1_y_vec }\r\n};\r\n\r\nexport default generatePulse;","const generateGradient = params => {\r\n  const Gz_vec = Array.from({ length: params.N_pulse }, (v, i) => params.amp_Gz);\r\n  return { Gz_vec }\r\n};\r\n\r\nexport default generateGradient;","import generatePulse from './generatePulse';\r\nimport generateGradient from './generateGradient';\r\n\r\nconst B0 = 3;                     // T\r\nconst gamma = 42.5775;            // MHz/T\r\nconst T1 = 950;                   // ms\r\nconst T2 =  100;                  // ms\r\nconst T_pulse = 10;               // ms\r\nconst N_pulse = 100;\r\nconst dt_pulse = T_pulse/N_pulse; // ms\r\nconst amp_pulse = 0.001;          // mT\r\nconst shape_options = [\r\n  {\r\n    value: 1,\r\n    label: 'rect'\r\n  },\r\n  {\r\n    value: 2,\r\n    label: 'sinc'\r\n  },\r\n  {\r\n    value: 3,\r\n    label: 'Hm(sinc)'\r\n  },\r\n  {\r\n    value: 4,\r\n    label: 'Gaussian'\r\n  },\r\n];\r\nconst shape = 2;\r\nconst lobes = 3;\r\nconst sd = 1;                             // s              \r\nconst amp_Gz = 30;                        // mT/m\r\nconst l_profile = 5;                      // mm\r\nconst N_profile = 100;\r\nconst dl_profile = l_profile/N_profile;   // mm\r\n\r\n\r\nconst params = {\r\n  B0,\r\n  gamma,\r\n  T1,\r\n  T2,\r\n  T_pulse,\r\n  N_pulse,\r\n  dt_pulse,\r\n  amp_pulse,\r\n  shape_options,\r\n  shape,\r\n  lobes,\r\n  sd,\r\n  amp_Gz,\r\n  l_profile,\r\n  N_profile,\r\n  dl_profile,\r\n  isBusy: false\r\n}\r\n\r\nconst output = {\r\n  ...generatePulse(params),\r\n  ...generateGradient(params),\r\n  Mx_vec: [],\r\n  My_vec: [],\r\n  Mxy_vec: [],\r\n  Mz_vec: [],\r\n  z_vec: [],\r\n  SPx_vec: [],\r\n  SPy_vec: [],\r\n  SPxy_vec: [],\r\n  SPz_vec: []\r\n};\r\n\r\nconst initialState = {\r\n  params,\r\n  output\r\n};\r\n\r\nexport default initialState;","import generatePulse from './generatePulse';\r\nimport generateGradient from './generateGradient';\r\n\r\nconst update = (state, payload) => {\r\n  for (let [key, value] of Object.entries(payload)) {\r\n    let params = {};\r\n    let output = {};\r\n\r\n    switch (key) {\r\n      case 'B0':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'gamma':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'T1':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'T2':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'T_pulse':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value },\r\n          ...{ dt_pulse: value/state.params.N_pulse }\r\n        };\r\n        break\r\n      case 'N_pulse':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value },\r\n          ...{ dt_pulse: state.params.T_pulse/value }\r\n        };\r\n        break\r\n      case 'dt_pulse':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value },\r\n          ...{ T_pulse: state.params.N_pulse*value }\r\n        };\r\n        break\r\n      case 'amp_pulse':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'shape':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'lobes':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'sd':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'amp_Gz':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value }\r\n        }\r\n        break\r\n      case 'l_profile':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value },\r\n          ...{ dl_profile: value/state.params.N_profile }\r\n        };\r\n        break\r\n      case 'N_profile':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value },\r\n          ...{ dl_profile: state.params.l_profile/value }\r\n        };\r\n        break\r\n      case 'dl_profile':\r\n        params = {\r\n          ...state.params,\r\n          ...{ [key]: value },\r\n          ...{ dl_profile: state.params.N_profile*value }\r\n        };\r\n        break\r\n      case 'isBusy':\r\n          params = {\r\n            ...state.params,\r\n            ...{ [key]: value }\r\n          }\r\n          break\r\n      default:\r\n        return state;\r\n    }\r\n\r\n    output = {\r\n      ...state.output,\r\n      ...generatePulse(params),\r\n      ...generateGradient(params)\r\n    }\r\n\r\n    return { params, output }\r\n  }\r\n}\r\n\r\nexport default update;","import ode45 from 'ode45-cash-karp';\r\n\r\nconst simulate = (state) => {\r\n  const gamma = 2*Math.PI*state.params.gamma*10**6;\r\n  const T1 = state.params.T1/10**3;\r\n  const T2 = state.params.T2/10**3;\r\n  const T_pulse = state.params.T_pulse/10**3;\r\n  const dt = state.params.dt_pulse/10**3;\r\n  const t_vec = state.output.t_vec.map(t => t/10**3);\r\n  const B1_x_vec = state.output.B1_x_vec.map(B1_x => B1_x/10**3);\r\n  const B1_y_vec = state.output.B1_y_vec.map(B1_y => B1_y/10**3);\r\n\r\n  const bloch = (dMdt,M,t) => {\r\n    let Bx = 0;\r\n    let By = 0;\r\n\r\n    if (t < T_pulse) {\r\n      const index = t_vec.findIndex(v => v > t);\r\n      const alpha = (t - t_vec[index-1]) / (t_vec[index] - t_vec[index-1]);\r\n      Bx = B1_x_vec[index-1] + alpha * (B1_x_vec[index] - B1_x_vec[index-1]);\r\n      By = B1_y_vec[index-1] + alpha * (B1_y_vec[index] - B1_y_vec[index-1]);\r\n    }\r\n\r\n    dMdt[0] = -1/T2*M[0] + gamma*By*M[2];\r\n    dMdt[1] = -1/T2*M[1] + gamma*Bx*M[2];\r\n    dMdt[2] = gamma*By*M[0] - gamma*Bx*M[1] - 1/T1*M[2] + 1/T1;\r\n  };\r\n  \r\n  const M0 = [0,0,1];\r\n  const t0 = 0;\r\n  const dt0 = dt;\r\n  let integrator = ode45(M0, bloch, t0, dt0 )\r\n\r\n  let Mx_vec = [M0[0]];\r\n  let My_vec = [M0[1]];\r\n  let Mxy_vec = [Math.sqrt(M0[0]**2 + M0[1]**2)];\r\n  let Mz_vec = [M0[2]];\r\n\r\n  t_vec.slice(1).forEach(t => {\r\n    integrator.steps(Infinity, t)\r\n    Mx_vec.push(integrator.y[0])\r\n    My_vec.push(integrator.y[1])\r\n    Mxy_vec.push(Math.sqrt(integrator.y[0]**2+integrator.y[1]**2))\r\n    Mz_vec.push(integrator.y[2])\r\n  })\r\n\r\n  return {\r\n    params: {\r\n      ...state.params\r\n    },\r\n    output: {\r\n      ...state.output,\r\n      ...{ Mx_vec, My_vec, Mxy_vec, Mz_vec }\r\n    }\r\n  }\r\n}\r\n\r\nexport default simulate;","import ode45 from 'ode45-cash-karp';\r\n\r\nconst estimateProfile = (state) => {\r\n  const gamma = 2*Math.PI*state.params.gamma*10**6;\r\n  const T1 = state.params.T1/10**3;\r\n  const T2 = state.params.T2/10**3;\r\n  const T_pulse = state.params.T_pulse/10**3;\r\n  const dt = state.params.dt_pulse/10**3;\r\n  const l_profile = state.params.l_profile/10**3;\r\n  const N_profile = state.params.N_profile;\r\n  const t_vec = state.output.t_vec.map(t => t/10**3);\r\n  const B1_x_vec = state.output.B1_x_vec.map(B1_x => B1_x/10**3);\r\n  const B1_y_vec = state.output.B1_y_vec.map(B1_y => B1_y/10**3);\r\n  const z_vec = Array.from({ length: N_profile }, (v, i) => -l_profile/2 + l_profile/(N_profile-1)*i);\r\n  const Gz_vec = state.output.Gz_vec.map(Gz => Gz/10**3);\r\n\r\n  let SPx_vec = [];\r\n  let SPy_vec = [];\r\n  let SPxy_vec = [];\r\n  let SPz_vec = [];\r\n\r\n  z_vec.forEach( z => {\r\n    const bloch = (dMdt,M,t) => {\r\n      let delw0 = 0;\r\n      let Bx = 0;\r\n      let By = 0;\r\n  \r\n      if (t < T_pulse) {\r\n        const index = t_vec.findIndex(v => v > t);\r\n        const alpha = (t - t_vec[index-1]) / (t_vec[index] - t_vec[index-1]);\r\n        const Gz = Gz_vec[index-1] + alpha * (Gz_vec[index] - Gz_vec[index-1]);\r\n        delw0 = gamma*Gz*z;\r\n      }\r\n  \r\n      if (t < T_pulse) {\r\n        const index = t_vec.findIndex(v => v > t);\r\n        const alpha = (t - t_vec[index-1]) / (t_vec[index] - t_vec[index-1]);\r\n        Bx = B1_x_vec[index-1] + alpha * (B1_x_vec[index] - B1_x_vec[index-1]);\r\n        By = B1_y_vec[index-1] + alpha * (B1_y_vec[index] - B1_y_vec[index-1]);\r\n      }\r\n  \r\n      dMdt[0] = -1/T2*M[0] + gamma*By*M[2] + delw0*M[1];\r\n      dMdt[1] = -1/T2*M[1] + gamma*Bx*M[2] - delw0*M[0];\r\n      dMdt[2] = gamma*By*M[0] - gamma*Bx*M[1] - 1/T1*M[2] + 1/T1;\r\n    };\r\n\r\n    const M0 = [0,0,1];\r\n    const t0 = 0;\r\n    const dt0 = dt;\r\n\r\n    let integrator = ode45(M0, bloch, t0, dt0 )\r\n    integrator.steps(Infinity, T_pulse)\r\n    \r\n    SPx_vec.push(integrator.y[0])\r\n    SPy_vec.push(integrator.y[1])\r\n    SPxy_vec.push(Math.sqrt(integrator.y[0]**2+integrator.y[1]**2))\r\n    SPz_vec.push(integrator.y[2])\r\n  })\r\n\r\n  return {\r\n    params: {\r\n      ...state.params,\r\n      ...{ isBusy: false }\r\n    },\r\n    output: {\r\n      ...state.output,\r\n      ...{ \r\n        z_vec: z_vec.map(z => z*10**3),\r\n        SPx_vec,\r\n        SPy_vec,\r\n        SPxy_vec,\r\n        SPz_vec\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default estimateProfile;","import { UPDATE, SIMULATE, ESTIMATE_PROFILE, CLEAR, RESET } from '../../actions/types';\r\nimport initialState from './initialState';\r\nimport update from './update';\r\nimport simulate from './simulate';\r\nimport estimateProfile from './estimateProfile';\r\n\r\nconst simulatorReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case UPDATE:\r\n      return update(state, action.payload);\r\n    case SIMULATE:\r\n      return simulate(state);\r\n    case ESTIMATE_PROFILE:\r\n      return estimateProfile(state);\r\n    case CLEAR:\r\n        return {\r\n          params: { ...state.params },\r\n          output: {\r\n            ...state.output,\r\n            ...{ \r\n              Mx_vec: [],\r\n              My_vec: [],\r\n              Mxy_vec: [],\r\n              Mz_vec: [],\r\n              z_vec: [],\r\n              SPx_vec: [],\r\n              SPy_vec: [],\r\n              SPxy_vec: [],\r\n              SPz_vec: []\r\n            }\r\n          }\r\n        }\r\n    case RESET:\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default simulatorReducer;","const initialState = {\r\n  isDark: false\r\n};\r\n\r\nexport default initialState;","import { TOGGLE_THEME } from '../../actions/types';\r\nimport initialState from './initialState';\r\n\r\nconst visualReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case TOGGLE_THEME:\r\n      return {...state, ...{isDark: !state.isDark}};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default visualReducer;","import { combineReducers } from 'redux';\r\nimport simulatorReducer from './simulation';\r\nimport presentationReducer from './presentation';\r\n\r\nconst rootReducer = combineReducers({\r\n  simulation: simulatorReducer,\r\n  presentation: presentationReducer\r\n});\r\n\r\nexport default rootReducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore } from 'redux';\nimport rootReducer from './reducers';\nimport { Provider } from 'react-redux';\n\nconst store = createStore(rootReducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}